The time complexity  is O(n + q), where n is the length of the string s and q is the number of queries. This is because it iterates through the string once to calculate the weights (O(n)) and then iterates through each query to check for the presence of the weight in the set (O(q)).

The space complexity is O(n), where n is the length of the string s. The set of weights could in the worst-case scenario store a unique weight for each character in the string if every character is different then requiring space proportional to the length of the string.